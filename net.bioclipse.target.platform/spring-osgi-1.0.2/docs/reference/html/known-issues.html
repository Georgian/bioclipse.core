<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;1.&nbsp;Known Issues</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="issues.html" title="Spring Dynamic Modules for OSGi&#8482; Service Platforms"><link rel="up" href="issues.html" title="Spring Dynamic Modules for OSGi&#8482; Service Platforms"><link rel="prev" href="preface.html" title="Preface"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="http://www.springframework.org/osgi/" title="The Spring Framework - Spring Dynamic Modules"><img style="border:none;" src="images/xdev-spring_logo.jpg"></a><a style="border:none;" href="http://www.SpringSource.com/" title="SpringSource - Spring from the Source"><img style="border:none;position:absolute;padding-top:5px;right:42px;" src="images/s2-banner-rhs.png"></a></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="known-issues"></a>Chapter&nbsp;1.&nbsp;Known Issues</h2></div></div></div><p>As a side note, it worth pointing out that the issues below are not really bugs but rather improvements.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="OSGI-110"></a>1.1.&nbsp;CGLIB proxying fails with NPE from time to time</h2></div></div></div><p>During our tests, we have encountered a strange cglib behaviour; when trying to proxy <code class="literal">java.*</code> classes
      	the process fails with a NullPointerException. Further more, the bug cannot be reproduce constantly, depending a lot on the
      	number of runs and JVM platform used. We believe the cause is a <code class="literal">Weak</code> reference - see 
      	<a xmlns:xlink="http://www.w3.org/1999/xlink" href=" http://www.nabble.com/cglib-2.1_3-no-dep-and-NPE-in-AbstractClassGenerator-tf3645088.html#a10179844" target="_top">this</a> discussion. 
      	</p><p>See <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jira.springframework.org/browse/OSGI-110" target="_top">OSGI-110</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="OSGI-210"></a>1.2.&nbsp;Using <code class="literal">classpath</code> prefix on the root classpath (<code class="literal">/</code>) fails </h2></div></div></div><p>Calling <code class="methodname">getResource()/getResources()</code> from a Bundle, on the root folder (<code class="literal">/</code>) fails. Currently,
      	only Equinox and Knopflerfish (2.0.3+) support this behaviour.  At the moment of writing this document, Felix provides support for this in the 
      	upcoming 1.1.0.</p><p>See <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jira.springframework.org/browse/OSGI-210" target="_top">OSGI-210</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="OSGI-237"></a>1.3.&nbsp;Publishing prototypes as OSGi services</h2></div></div></div><p>Due to the way OSGi platform deals with OSGi services (it caches the instance and returns it every time), prototypes are not fully supported.
      	Spring-DM publishes a proxy that on each call, delegates back to the target application context for retrieving the instance. While with other beans
      	this works, in case of prototypes, this results in one-instance-per-invocation which is incorrect. Additional functionality needs to be added
      	to fully support prototypes even though, as pointed out, this involves a knowledge between Client/Server regarding the publication contract.</p><p>See <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jira.springframework.org/browse/OSGI-237" target="_top">OSGI-237</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="OSGI-245"></a>1.4.&nbsp;Service proxy/object equality</h2></div></div></div><p>Since Spring-DM uses run-time proxies, equality between objects that rely on private field comparison tends to fail. The problem becomes
      	more apparent when dealing with sets that use service rather then service reference equality. Since the proxy does only method interception it
      	does not seem to exist any practical solution at the moment. As a workaround, consider modifying your equality method or relying on the reference
      	equality.</p><p>See <a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://jira.springframework.org/browse/OSGI-245" target="_top">OSGI-245</a></p></div></div><div xmlns:fo="http://www.w3.org/1999/XSL/Format" class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="preface.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="issues.html">Home</a></td><td width="40%" align="right">&nbsp;</td></tr><tr><td width="40%" align="left" valign="top">Preface&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.SpringSource.com/" title="SpringSource - Spring from the Source">Sponsored by SpringSource
                                        </a></span></td><td width="40%" align="right" valign="top">&nbsp;</td></tr></table></div></body></html>